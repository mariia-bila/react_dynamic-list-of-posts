(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(7),s=n.n(c),o=n(2),i=n(1),r=(n(13),n(14),n(6)),a=n.n(r),l=(n(15),"https://mate.academy/students-api"),u=function(e,t){return fetch("".concat(l).concat(e),t).then((function(e){if(!e.ok)throw new Error("Error");return e.json()})).then((function(e){return e.data}))},j=n(8),d=(n(16),n(0)),b=function(e){var t=e.addComment,n=Object(i.useState)(""),c=Object(o.a)(n,2),s=c[0],r=c[1],a=Object(i.useState)(""),l=Object(o.a)(a,2),u=l[0],j=l[1],b=Object(i.useState)(""),m=Object(o.a)(b,2),h=m[0],O=m[1];return Object(d.jsxs)("form",{className:"NewCommentForm",onSubmit:function(e){!function(e){e.preventDefault(),t(s,u,h)}(e),O(""),r(""),j("")},children:[Object(d.jsx)("div",{className:"form-field",children:Object(d.jsx)("input",{type:"text",name:"name",value:s,placeholder:"Your name",className:"NewCommentForm__input",onChange:function(e){return r(e.target.value)},required:!0})}),Object(d.jsx)("div",{className:"form-field",children:Object(d.jsx)("input",{name:"email",type:"email",value:u,onChange:function(e){return j(e.target.value)},placeholder:"Your email",className:"NewCommentForm__input",required:!0})}),Object(d.jsx)("div",{className:"form-field",children:Object(d.jsx)("textarea",{name:"body",value:h,onChange:function(e){return O(e.target.value)},placeholder:"Type comment here",className:"NewCommentForm__input",required:!0})}),Object(d.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})},m=(n(18),function(e){var t=e.selectedId,n=Object(i.useState)(null),c=Object(o.a)(n,2),s=c[0],r=c[1],a=Object(i.useState)([]),m=Object(o.a)(a,2),h=m[0],O=m[1],p=Object(i.useState)(!0),f=Object(o.a)(p,2),x=f[0],v=f[1],_=Object(i.useState)(""),N=Object(o.a)(_,2),w=N[0],S=N[1],P=function(e){var t;t="/comments/".concat(e),u(t,{method:"DELETE"}),O(h.filter((function(t){return t.id!==e})))};return Object(i.useEffect)((function(){var e;(e=t,fetch("".concat(l,"/posts/").concat(e)).then((function(e){return e.ok?e.json():Promise.reject(new Error("Some error happens"))}))).then((function(e){r(e),S("")})).catch((function(){S("Ooops, something went wrong")}))}),[t]),Object(i.useEffect)((function(){var e;(e=t,fetch("".concat(l,"/comments/")).then((function(e){return e.ok?e.json():Promise.reject(new Error("Some error happens"))})).then((function(t){return t.filter((function(t){return t.postId===e}))}))).then((function(e){O(e),S("")})).catch((function(){S("Ooops, something went wrong")}))}),[t]),Object(d.jsxs)("div",{className:"PostDetails",children:[Object(d.jsx)("h2",{children:"Post details:"}),w,s&&Object(d.jsx)("section",{className:"PostDetails__post",children:Object(d.jsx)("p",{children:s.body})}),Object(d.jsxs)("section",{className:"PostDetails__comments",children:[Object(d.jsxs)("button",{type:"button",className:"button",onClick:function(){return v(!x)},children:[x?"Hide":"Show"," ".concat(h.length," comments")]}),x&&Object(d.jsx)("ul",{className:"PostDetails__list",children:h.map((function(e){return Object(d.jsxs)("li",{className:"PostDetails__list-item",children:[Object(d.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return P(e.id)},children:"X"}),Object(d.jsx)("p",{children:e.name}),Object(d.jsx)("p",{children:e.body})]},e.id)}))})]}),Object(d.jsx)("section",{children:Object(d.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(d.jsx)(b,{addComment:function(e,n,c){var s,o={id:h.length+1,postId:t,name:e,email:n,body:c};s=o,u("/comments",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(s)}),O([].concat(Object(j.a)(h),[o]))}})})})]})}),h=function(e){var t=e.userId,n=Object(i.useState)(null),c=Object(o.a)(n,2),s=c[0],r=c[1],u=Object(i.useState)(0),j=Object(o.a)(u,2),b=j[0],h=j[1],O=Object(i.useState)(!1),p=Object(o.a)(O,2),f=p[0],x=p[1],v=Object(i.useState)(""),_=Object(o.a)(v,2),N=_[0],w=_[1];Object(i.useEffect)((function(){(function(e){return 0===e?fetch("".concat(l,"/posts?")).then((function(e){return e.ok?e.json():Promise.reject(new Error("Some error happens"))})):fetch("".concat(l,"/posts?userId=").concat(e)).then((function(e){return e.ok?e.json():Promise.reject(new Error("Some error happens"))}))})(t).then((function(e){r(e),w("")})).catch((function(){w("Ooops, something went wrong")}))}),[t]);var S=function(e){e.id===b?(h(0),x(!1)):h(e.id)};return Object(d.jsxs)("div",{className:"main",children:[Object(d.jsxs)("div",{className:"PostsList",children:[Object(d.jsx)("h2",{children:"Posts:"}),N,s&&Object(d.jsx)("ul",{className:"PostsList__list",children:s.map((function(e){return Object(d.jsxs)("li",{className:"PostsList__item",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("b",{children:"User: ".concat(e.userId,":")}),e.title]}),!f&&Object(d.jsx)("button",{type:"button",className:a()("PostsList__button button"),onClick:function(){return t=e.id,h(t),void x(!0);var t},children:"Open"}),f&&Object(d.jsx)("button",{type:"button",className:a()("PostsList__button button"),onClick:function(){return S(e)},children:e.id===b?"Close":"Open"})]},e.id)}))})]}),f&&Object(d.jsx)("div",{className:"PostsList__side",children:Object(d.jsx)(m,{selectedId:b})})]})},O=function(){var e=Object(i.useState)(0),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("header",{className:"App__header",children:Object(d.jsxs)("label",{htmlFor:"list",children:["Select a user: \xa0",Object(d.jsxs)("select",{className:"App__user-selector",id:"list",value:n,onChange:function(e){c(Number(e.target.value))},children:[Object(d.jsx)("option",{value:"0",children:"All users"}),Object(d.jsx)("option",{value:"1",children:"Leanne Graham"}),Object(d.jsx)("option",{value:"2",children:"Ervin Howell"}),Object(d.jsx)("option",{value:"3",children:"Clementine Bauch"}),Object(d.jsx)("option",{value:"4",children:"Patricia Lebsack"}),Object(d.jsx)("option",{value:"5",children:"Chelsey Dietrich"}),Object(d.jsx)("option",{value:"6",children:"Mrs. Dennis Schulist"}),Object(d.jsx)("option",{value:"7",children:"Kurtis Weissnat"}),Object(d.jsx)("option",{value:"8",children:"Nicholas Runolfsdottir V"}),Object(d.jsx)("option",{value:"9",children:"Glenna Reichert"}),Object(d.jsx)("option",{value:"10",children:"Leanne Graham"})]})]})}),Object(d.jsx)("main",{className:"App__main",children:Object(d.jsx)("div",{className:"App__sidebar",children:Object(d.jsx)(h,{userId:n})})})]})};s.a.render(Object(d.jsx)(O,{}),document.getElementById("root"))}],[[19,1,2]]]);
//# sourceMappingURL=main.8b3754dd.chunk.js.map